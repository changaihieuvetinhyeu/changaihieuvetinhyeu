<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản Lý Sinh Viên - AI Style</title>
    <style>
        /* --- 1. Cấu hình cơ bản & Font chữ --- */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap');

        :root {
            --primary-orange: #FF9900;
            --primary-orange-hover: #e68a00;
            --bg-color: #FFFBF5; /* Màu kem nhạt giống ảnh */
            --text-dark: #1A1A1A;
            --terminal-bg: #1E1E2E; /* Màu nền tối của terminal */
            --terminal-text: #A6ACCD;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-dark);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* --- 2. Layout chia 2 cột --- */
        .container {
            display: flex;
            width: 90%;
            max-width: 1200px;
            gap: 50px;
            align-items: center;
            flex-wrap: wrap;
        }

        /* --- 3. Cột Trái: Form nhập liệu (Style giống phần text bên trái) --- */
        .left-panel {
            flex: 1;
            min-width: 300px;
        }

        h1 {
            font-size: 3.5rem;
            line-height: 1.1;
            margin-bottom: 20px;
            color: var(--text-dark);
        }

        h1 span {
            color: var(--primary-orange);
            display: block;
        }

        p.subtitle {
            font-size: 1.1rem;
            color: #555;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        /* Form Styling */
        .form-group {
            margin-bottom: 15px;
        }

        input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            transition: border-color 0.3s;
            background: #fff;
        }

        input:focus {
            outline: none;
            border-color: var(--primary-orange);
        }

        .btn-group {
            display: flex;
            gap: 15px;
            margin-top: 25px;
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: transform 0.2s, opacity 0.2s;
        }

        button:active {
            transform: scale(0.98);
        }

        .btn-primary {
            background-color: var(--primary-orange);
            color: white;
            box-shadow: 0 4px 15px rgba(255, 153, 0, 0.3);
        }

        .btn-primary:hover {
            background-color: var(--primary-orange-hover);
        }

        .btn-secondary {
            background-color: #E5E7EB;
            color: #374151;
        }

        .btn-secondary:hover {
            background-color: #d1d5db;
        }

        /* --- 4. Cột Phải: Terminal hiển thị (Style giống cái máy tính bên phải) --- */
        .right-panel {
            flex: 1;
            min-width: 300px;
            display: flex;
            justify-content: center;
        }

        .terminal-window {
            background-color: var(--terminal-bg);
            width: 100%;
            max-width: 550px;
            height: 500px; /* Chiều cao cố định */
            border-radius: 12px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.2);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            border: 1px solid #333;
        }

        .terminal-header {
            background-color: #27273A;
            padding: 12px 15px;
            display: flex;
            align-items: center;
            border-bottom: 1px solid #333;
        }

        .dots {
            display: flex;
            gap: 8px;
        }

        .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .dot.red { background-color: #FF5F56; }
        .dot.yellow { background-color: #FFBD2E; }
        .dot.green { background-color: #27C93F; }

        .terminal-title {
            margin-left: 20px;
            color: #888;
            font-size: 0.85rem;
            font-family: monospace;
        }

        .terminal-body {
            padding: 20px;
            font-family: 'Courier New', Courier, monospace;
            color: var(--terminal-text);
            overflow-y: auto; /* Cho phép cuộn nếu danh sách dài */
            flex: 1;
        }

        /* Table styling inside terminal */
        .student-item {
            border-bottom: 1px solid #333;
            padding: 10px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .student-info {
            line-height: 1.5;
        }

        .code-keyword { color: #C792EA; } /* Purple like code */
        .code-string { color: #C3E88D; } /* Green like string */
        .code-number { color: #F78C6C; } /* Orange like number */
        .code-var { color: #82AAFF; } /* Blue */

        .action-btn {
            background: transparent;
            border: 1px solid #555;
            color: #ddd;
            padding: 4px 8px;
            font-size: 0.8rem;
            border-radius: 4px;
            margin-left: 5px;
            cursor: pointer;
        }
        
        .action-btn:hover {
            background: #444;
            border-color: #777;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
                padding: 20px 0;
            }
            
            h1 { font-size: 2.5rem; }
            .terminal-window { height: 400px; }
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="left-panel">
            <h1>Quản lý <span>Sinh viên</span></h1>
            <p class="subtitle">Hệ thống quản lý thông tin học tập thông minh. Nhập thông tin để thêm vào cơ sở dữ liệu.</p>

            <form id="studentForm">
                <div class="form-group">
                    <input type="text" id="masv" placeholder="Mã SV (Ví dụ: B19DCCN001)" required>
                </div>
                <div class="form-group">
                    <input type="text" id="hoten" placeholder="Họ và tên" required>
                </div>
                <div class="form-group">
                    <input type="date" id="ngaysinh" required>
                </div>
                <div class="form-group">
                    <input type="text" id="lop" placeholder="Lớp (Ví dụ: D19CQCN01)" required>
                </div>
                <div class="form-group">
                    <input type="number" id="gpa" placeholder="Điểm GPA (0 - 4.0)" step="0.01" min="0" max="4" required>
                </div>

                <div class="btn-group">
                    <button type="submit" class="btn-primary" id="btnSubmit">Thêm sinh viên</button>
                    <button type="button" class="btn-secondary" onclick="resetForm()">Làm mới</button>
                </div>
            </form>
        </div>

        <div class="right-panel">
            <div class="terminal-window">
                <div class="terminal-header">
                    <div class="dots">
                        <div class="dot red"></div>
                        <div class="dot yellow"></div>
                        <div class="dot green"></div>
                    </div>
                    <div class="terminal-title">student_manager.js</div>
                </div>
                <div class="terminal-body" id="terminalOutput">
                    <div style="color: #666; font-style: italic;">// Danh sách sinh viên trống...</div>
                    <div style="color: #666; font-style: italic;">// Vui lòng nhập thông tin bên trái.</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- 1. ĐỊNH NGHĨA CLASS SINH VIÊN (Theo yêu cầu đề bài) ---
        class Student {
            constructor(maSV, hoTen, ngaySinh, lop, gpa) {
                this.maSV = maSV;
                this.hoTen = hoTen;
                this.ngaySinh = ngaySinh;
                this.lop = lop;
                this.gpa = gpa;
            }

            // Phương thức cập nhật thông tin
            updateInfo(hoTen, ngaySinh, lop, gpa) {
                this.hoTen = hoTen;
                this.ngaySinh = ngaySinh;
                this.lop = lop;
                this.gpa = gpa;
            }

            // Phương thức format hiển thị kiểu code
            toHTML() {
                return `
                    <div class="student-info">
                        <span class="code-keyword">const</span> <span class="code-var">${this.maSV}</span> = {<br>
                        &nbsp;&nbsp;name: <span class="code-string">"${this.hoTen}"</span>,<br>
                        &nbsp;&nbsp;class: <span class="code-string">"${this.lop}"</span>,<br>
                        &nbsp;&nbsp;gpa: <span class="code-number">${this.gpa}</span><br>
                        };
                    </div>
                    <div>
                        <button class="action-btn" onclick="prepareEdit('${this.maSV}')">Edit</button>
                    </div>
                `;
            }
        }

        // --- 2. QUẢN LÝ DỮ LIỆU ---
        let studentList = [];
        let isEditing = false; // Biến cờ để biết đang thêm mới hay sửa

        // --- 3. CÁC HÀM XỬ LÝ (Controller) ---

        // Hàm hiển thị danh sách ra màn hình (Render)
        function renderStudents() {
            const output = document.getElementById('terminalOutput');
            output.innerHTML = ''; // Xóa nội dung cũ

            if (studentList.length === 0) {
                output.innerHTML = `
                    <div style="color: #666; font-style: italic;">// Danh sách sinh viên trống...</div>
                    <div style="color: #666; font-style: italic;">// Vui lòng nhập thông tin bên trái.</div>
                `;
                return;
            }

            // Dấu nhắc lệnh
            output.innerHTML += `<div style="color: #4CAF50; margin-bottom: 10px;">➜  ~ node list_students.js</div>`;

            studentList.forEach(sv => {
                const div = document.createElement('div');
                div.className = 'student-item';
                div.innerHTML = sv.toHTML();
                output.appendChild(div);
            });
        }

        // Hàm xử lý khi nhấn Submit
        document.getElementById('studentForm').addEventListener('submit', function(e) {
            e.preventDefault(); // Ngăn load lại trang

            // Lấy dữ liệu từ form
            const maSV = document.getElementById('masv').value.trim();
            const hoTen = document.getElementById('hoten').value.trim();
            const ngaySinh = document.getElementById('ngaysinh').value;
            const lop = document.getElementById('lop').value.trim();
            const gpa = parseFloat(document.getElementById('gpa').value);

            if (isEditing) {
                // --- LOGIC CẬP NHẬT (UPDATE) ---
                const student = studentList.find(s => s.maSV === maSV);
                if (student) {
                    student.updateInfo(hoTen, ngaySinh, lop, gpa); // Gọi phương thức của đối tượng
                    alert(`Đã cập nhật thông tin sinh viên ${maSV}`);
                }
                
                // Reset trạng thái form về thêm mới
                document.getElementById('masv').readOnly = false;
                document.getElementById('btnSubmit').innerText = "Thêm sinh viên";
                document.getElementById('btnSubmit').style.backgroundColor = ""; // Reset màu
                isEditing = false;

            } else {
                // --- LOGIC THÊM MỚI (CREATE) ---
                // Kiểm tra trùng mã SV
                if (studentList.some(s => s.maSV === maSV)) {
                    alert('Mã sinh viên này đã tồn tại!');
                    return;
                }

                // Tạo đối tượng Student mới
                const newStudent = new Student(maSV, hoTen, ngaySinh, lop, gpa);
                studentList.push(newStudent);
            }

            // Render lại giao diện và reset form
            renderStudents();
            resetForm();
        });

        // Hàm chuẩn bị sửa (Đưa dữ liệu lên form)
        window.prepareEdit = function(maSV) {
            const student = studentList.find(s => s.maSV === maSV);
            if (!student) return;

            // Đổ dữ liệu vào ô input
            document.getElementById('masv').value = student.maSV;
            document.getElementById('hoten').value = student.hoTen;
            document.getElementById('ngaysinh').value = student.ngaySinh;
            document.getElementById('lop').value = student.lop;
            document.getElementById('gpa').value = student.gpa;

            // Khóa ô Mã SV (không cho sửa ID)
            document.getElementById('masv').readOnly = true;

            // Đổi nút thành Cập nhật
            const btn = document.getElementById('btnSubmit');
            btn.innerText = "Lưu thay đổi";
            btn.style.backgroundColor = "#27C93F"; // Đổi màu xanh lá

            isEditing = true;
        }

        // Hàm reset form
        window.resetForm = function() {
            document.getElementById('studentForm').reset();
            document.getElementById('masv').readOnly = false;
            document.getElementById('btnSubmit').innerText = "Thêm sinh viên";
            document.getElementById('btnSubmit').style.backgroundColor = "";
            isEditing = false;
        }
    </script>
</body>
</html>
